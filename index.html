
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chess Adventure</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 15px; color: #333; touch-action: manipulation; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; color: white; font-size: 2.2em; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .game-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; align-items: flex-start; }
        .board-section { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .board-labels { display: flex; justify-content: center; margin-bottom: 10px; gap: 70px; padding-left: 35px; }
        .board-labels span { width: 70px; text-align: center; font-weight: bold; color: #8B4513; }
        .board-with-numbers { display: flex; gap: 10px; }
        .row-labels { display: flex; flex-direction: column-reverse; justify-content: space-around; padding: 5px 0; }
        .row-labels span { height: 70px; display: flex; align-items: center; font-weight: bold; color: #8B4513; }
        .chessboard { display: grid; grid-template-columns: repeat(8, 70px); grid-template-rows: repeat(8, 70px); border: 5px solid #8B4513; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .square { width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer; transition: all 0.2s; position: relative; user-select: none; }
        .square.light { background-color: #f0d9b5; }
        .square.dark { background-color: #b58863; }
        .square.selected { background-color: #7fc97f !important; box-shadow: inset 0 0 15px rgba(0,0,0,0.4); }
        .square.legal-move { background-color: #90EE90 !important; }
        .square.legal-move::after { content: '‚óè'; position: absolute; color: rgba(0,0,0,0.4); font-size: 24px; }
        .square.correct-position { box-shadow: inset 0 0 10px rgba(76, 175, 80, 0.6); }
        .square.wrong-position { box-shadow: inset 0 0 10px rgba(244, 67, 54, 0.6); }
        .square:active { transform: scale(0.95); }
        .sidebar { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); min-width: 320px; max-width: 450px; flex: 1; }
        .mode-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .mode-btn { flex: 1; padding: 15px 10px; border: none; border-radius: 10px; font-size: 15px; font-weight: bold; cursor: pointer; transition: all 0.3s; background: #e0e0e0; min-height: 50px; }
        .mode-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; transform: scale(1.05); }
        .level-info { background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%); color: white; padding: 18px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .level-info h3 { margin-bottom: 8px; font-size: 1.3em; }
        .instruction-box { background: #f9f9f9; padding: 18px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid #667eea; font-size: 16px; line-height: 1.5; }
        .instruction-box h4 { color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .piece-selector { background: #f0f0f0; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        .piece-selector h4 { margin-bottom: 12px; color: #667eea; font-size: 1.1em; }
        .piece-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .piece-btn { padding: 15px; border: 3px solid #ddd; border-radius: 10px; background: white; font-size: 36px; cursor: pointer; transition: all 0.3s; min-height: 70px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .piece-btn span:last-child { font-size: 12px; margin-top: 5px; font-weight: bold; }
        .piece-btn.selected-piece { border-color: #667eea; background: #e8eaf6; transform: scale(1.05); box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3); }
        .piece-btn:active { transform: scale(0.95); }
        .controls { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .btn { padding: 15px 20px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s; flex: 1; min-width: 100px; min-height: 50px; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-secondary { background: #e0e0e0; color: #333; }
        .btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; }
        .btn-warning { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .btn:active { transform: scale(0.95); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .progress-bar { background: #e0e0e0; height: 25px; border-radius: 12px; overflow: hidden; margin-bottom: 15px; }
        .progress-fill { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); height: 100%; transition: width 0.5s; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold; }
        .piece-legend { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 15px; }
        .piece-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: #f9f9f9; border-radius: 8px; }
        .piece-item span:first-child { font-size: 28px; }
        .hint-box { background: #fff3cd; border: 3px solid #ffc107; padding: 15px; border-radius: 10px; margin-bottom: 15px; font-size: 15px; }
        .status-message { padding: 15px; border-radius: 10px; margin-bottom: 15px; text-align: center; font-weight: bold; font-size: 16px; }
        .status-success { background: #d4edda; color: #155724; border: 2px solid #28a745; }
        .status-error { background: #f8d7da; color: #721c24; border: 2px solid #dc3545; }
        .status-info { background: #d1ecf1; color: #0c5460; border: 2px solid #17a2b8; }
        .turn-indicator { background: #f0f0f0; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 15px; font-weight: bold; font-size: 16px; }
        .setup-helper { background: #e8f5e9; border: 2px solid #4caf50; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        .setup-helper h4 { color: #2e7d32; margin-bottom: 10px; font-size: 1.1em; }
        .setup-helper p { font-size: 15px; line-height: 1.5; }
        @media (max-width: 768px) {
            .chessboard { grid-template-columns: repeat(8, 60px); grid-template-rows: repeat(8, 60px); }
            .square { width: 60px; height: 60px; font-size: 42px; }
            .board-labels { gap: 60px; }
            .board-labels span { width: 60px; }
            .row-labels span { height: 60px; }
            h1 { font-size: 1.8em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ôî Chess Adventure ‚ôö</h1>
        <div class="game-container">
            <div class="board-section">
                <div class="board-labels">
                    <span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span>
                </div>
                <div class="board-with-numbers">
                    <div class="row-labels">
                        <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span>
                    </div>
                    <div id="chessboard" class="chessboard"></div>
                </div>
            </div>
            <div class="sidebar">
                <div class="mode-selector">
                    <button class="mode-btn active" onclick="setMode('learn')">üìö Learn</button>
                    <button class="mode-btn" onclick="setMode('practice')">ü§ñ Practice</button>
                    <button class="mode-btn" onclick="setMode('multiplayer')">üë• 2-Player</button>
                </div>
                <div id="level-info" class="level-info"></div>
                <div class="progress-bar"><div id="progress-fill" class="progress-fill" style="width: 0%">0%</div></div>
                <div id="status-message"></div>
                <div id="turn-indicator" class="turn-indicator"></div>
                <div id="setup-helper" style="display: none;"></div>
                <div id="piece-selector" style="display: none;"></div>
                <div id="instruction-box" class="instruction-box"></div>
                <div id="hint-box" style="display: none;"></div>
                <div class="controls">
                    <button class="btn btn-secondary" onclick="clearBoard()" id="clear-btn" style="display: none;">üóëÔ∏è Clear</button>
                    <button class="btn btn-warning" onclick="showSolution()" id="solution-btn" style="display: none;">üëÄ Show Answer</button>
                </div>
                <div class="controls">
                    <button class="btn btn-secondary" onclick="undoMove()" id="undo-btn">‚Ü∂ Undo</button>
                    <button class="btn btn-secondary" onclick="getHint()" id="hint-btn">üí° Hint</button>
                    <button class="btn btn-primary" onclick="resetBoard()" id="reset-btn">üîÑ Reset</button>
                </div>
                <div class="controls">
                    <button class="btn btn-success" onclick="checkSetup()" id="check-setup-btn" style="display: none;">‚úì Check My Setup</button>
                    <button class="btn btn-primary" onclick="nextLevel()" id="next-btn" style="display: none;">Next Level ‚Üí</button>
                </div>
                <div id="piece-legend" class="piece-legend"></div>
            </div>
        </div>
    </div>
    <script>
        const P = {'K':'‚ôî','Q':'‚ôï','R':'‚ôñ','B':'‚ôó','N':'‚ôò','P':'‚ôô','k':'‚ôö','q':'‚ôõ','r':'‚ôú','b':'‚ôù','n':'‚ôû','p':'‚ôü'};
        const PN = {'K':'King','Q':'Queen','R':'Rook','B':'Bishop','N':'Knight','P':'Pawn'};
        let S = {mode:'learn',lv:1,board:Array(8).fill(null).map(()=>Array(8).fill(null)),sel:null,turn:'white',hist:[],comp:[0,0,0,0,0,0,0,0],selP:null,setup:false};
        const L = [{id:1,name:"Board Setup",desc:"Learn how to set up the chess board!",type:"setup",inst:"Set up the chess board! White pieces go on rows 1-2 (bottom), black pieces on rows 7-8 (top)."},{id:2,name:"The Rook",desc:"Learn how the Rook moves!",type:"movement",piece:'R',inst:"The Rook moves in straight lines - horizontally or vertically. Move the white Rook to capture the black pawn!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[4][0]='R';b[4][7]='p';return b;}},{id:3,name:"The Bishop",desc:"Learn how the Bishop moves!",type:"movement",piece:'B',inst:"The Bishop moves diagonally. Move the white Bishop to capture the black pawn!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[3][0]='B';b[6][3]='p';return b;}},{id:4,name:"The Queen",desc:"Learn how the Queen moves!",type:"movement",piece:'Q',inst:"The Queen is the most powerful piece! She moves like a Rook AND a Bishop. Capture the black pawn!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[3][3]='Q';b[3][7]='p';return b;}},{id:5,name:"The Knight",desc:"Learn how the Knight moves!",type:"movement",piece:'N',inst:"The Knight moves in an 'L' shape and can jump over pieces! Capture the black pawn!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[3][3]='N';b[5][4]='p';b[4][4]='P';return b;}},{id:6,name:"The Pawn",desc:"Learn how the Pawn moves!",type:"movement",piece:'P',inst:"Pawns move forward one square (or two on their first move). They capture diagonally forward. Capture the black pawn!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[1][3]='P';b[2][4]='p';return b;}},{id:7,name:"The King",desc:"Learn how the King moves!",type:"movement",piece:'K',inst:"The King moves one square in any direction. Move your King to safety!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[0][4]='K';b[2][4]='r';return b;}},{id:8,name:"Basic Checkmate",desc:"Learn how to checkmate!",type:"puzzle",inst:"Checkmate means the King is in check and cannot escape. Use your Queen to checkmate the black King!",setup:()=>{let b=Array(8).fill(null).map(()=>Array(8).fill(null));b[0][0]='K';b[7][4]='k';b[5][0]='Q';return b;}}];
        function getInit(){return[['R','N','B','Q','K','B','N','R'],['P','P','P','P','P','P','P','P'],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],['p','p','p','p','p','p','p','p'],['r','n','b','q','k','b','n','r']];}
        function initBoard(){const b=document.getElementById('chessboard');b.innerHTML='';for(let r=7;r>=0;r--){for(let c=0;c<8;c++){const sq=document.createElement('div');sq.className=`square ${(r+c)%2===0?'light':'dark'}`;sq.dataset.row=r;sq.dataset.col=c;sq.onclick=()=>handleClick(r,c);const p=S.board[r][c];if(p)sq.textContent=P[p];b.appendChild(sq);}}updateTurn();}
        function handleClick(r,c){if(S.setup){handleSetup(r,c);return;}const p=S.board[r][c];if(S.sel){const[sr,sc]=S.sel;if(isLegal(sr,sc,r,c)){makeMove(sr,sc,r,c);S.sel=null;clearHL();if(S.mode==='practice'&&S.turn==='black')setTimeout(aiMove,500);}else if(p&&isPlayerP(p)){selectSq(r,c);}else{S.sel=null;clearHL();}}else if(p&&isPlayerP(p)){selectSq(r,c);}}
        function handleSetup(r,c){if(!S.selP){showMsg('üëÜ Please select a piece type first!','info');return;}S.board[r][c]=S.selP;initBoard();showMsg(`Placed ${PN[S.selP.toUpperCase()]} on row ${r+1}`,'info');}
        function showPSel(){const s=document.getElementById('piece-selector');s.style.display='block';s.innerHTML=`<h4>üëÜ Select a Piece to Place</h4><div class="piece-buttons">${['R','N','B','Q','K','P','r','n','b','q','k','p'].map(p=>`<button class="piece-btn" onclick="selPType('${p}')"><span>${P[p]}</span><span>${p===p.toUpperCase()?'W':'B'} ${PN[p.toUpperCase()]}</span></button>`).join('')}</div>`;}
        function selPType(t){S.selP=t;document.querySelectorAll('.piece-btn').forEach(b=>b.classList.remove('selected-piece'));event.target.closest('.piece-btn').classList.add('selected-piece');showMsg(`Selected: ${t===t.toUpperCase()?'White':'Black'} ${PN[t.toUpperCase()]} - Click on board to place!`,'info');}
        function showHelper(){const h=document.getElementById('setup-helper');h.style.display='block';h.innerHTML='<h4>üéØ How to Set Up the Board</h4><p><strong>Step 1:</strong> Click a piece below (White or Black)<br><strong>Step 2:</strong> Click on the board to place it<br><strong>Step 3:</strong> Repeat for all pieces<br><strong>Step 4:</strong> Click "Check My Setup"<br><br><strong>Remember:</strong> White pieces go on rows 1-2 (bottom), Black on rows 7-8 (top)</p>';}
        function checkSetup(){const t=getInit();let e=[],c=0;clearHL();for(let r=0;r<8;r++){for(let cl=0;cl<8;cl++){const cp=S.board[r][cl],tp=t[r][cl],sq=document.querySelector(`[data-row="${r}"][data-col="${cl}"]`);if(cp===tp){if(cp!==null){sq.classList.add('correct-position');c++;}}else{if(cp!==null||tp!==null){sq.classList.add('wrong-position');e.push({r,cl,cp,tp});}}}}if(e.length===0){completeL();S.setup=false;document.getElementById('piece-selector').style.display='none';document.getElementById('setup-helper').style.display='none';document.getElementById('check-setup-btn').style.display='none';document.getElementById('clear-btn').style.display='none';document.getElementById('solution-btn').style.display='none';}else{showMsg(`${c} pieces correct! ${e.length} pieces need fixing. Red glow = wrong position.`,'error');setTimeout(clearHL,3000);}}
        function showSolution(){S.board=getInit();initBoard();showMsg("Here's the correct setup! Study it, then click Reset to try again.",'info');}
        function clearBoard(){S.board=Array(8).fill(null).map(()=>Array(8).fill(null));S.selP=null;initBoard();showMsg('Board cleared! Start placing pieces.','info');}
        function isPlayerP(p){if(S.mode==='multiplayer')return true;if(S.mode==='practice')return S.turn==='white'&&p===p.toUpperCase();return p===p.toUpperCase();}
        function selectSq(r,c){S.sel=[r,c];clearHL();document.querySelectorAll('.square').forEach(sq=>{const sr=parseInt(sq.dataset.row),sc=parseInt(sq.dataset.col);if(sr===r&&sc===c)sq.classList.add('selected');else if(isLegal(r,c,sr,sc))sq.classList.add('legal-move');});}
        function clearHL(){document.querySelectorAll('.square').forEach(sq=>sq.classList.remove('selected','legal-move','correct-position','wrong-position'));}
        function makeMove(fr,fc,tr,tc){const p=S.board[fr][fc],cap=S.board[tr][tc];S.hist.push({from:[fr,fc],to:[tr,tc],piece:p,captured:cap});S.board[tr][tc]=p;S.board[fr][fc]=null;if((p==='P'&&tr===7)||(p==='p'&&tr===0))S.board[tr][tc]=p==='P'?'Q':'q';S.turn=S.turn==='white'?'black':'white';initBoard();checkComp();}
        function undoMove(){if(S.hist.length===0)return;const m=S.hist.pop();S.board[m.from[0]][m.from[1]]=m.piece;S.board[m.to[0]][m.to[1]]=m.captured;S.turn=S.turn==='white'?'black':'white';initBoard();}
        function isLegal(fr,fc,tr,tc){const p=S.board[fr][fc];if(!p)return false;const tp=S.board[tr][tc];if(tp&&(p.toUpperCase()===p)===(tp.toUpperCase()===tp))return false;const pt=p.toUpperCase();switch(pt){case'P':return isPawnL(fr,fc,tr,tc,p);case'R':return isRookL(fr,fc,tr,tc);case'N':return isKnightL(fr,fc,tr,tc);case'B':return isBishopL(fr,fc,tr,tc);case'Q':return isRookL(fr,fc,tr,tc)||isBishopL(fr,fc,tr,tc);case'K':return Math.abs(fr-tr)<=1&&Math.abs(fc-tc)<=1;}return false;}
        function isPawnL(fr,fc,tr,tc,p){const d=p===p.toUpperCase()?1:-1,sr=p===p.toUpperCase()?1:6;if(fc===tc&&!S.board[tr][tc]){if(tr===fr+d)return true;if(fr===sr&&tr===fr+2*d&&!S.board[fr+d][fc])return true;}if(Math.abs(tc-fc)===1&&tr===fr+d&&S.board[tr][tc])return true;return false;}
        function isRookL(fr,fc,tr,tc){if(fr!==tr&&fc!==tc)return false;return!isBlocked(fr,fc,tr,tc);}
        function isBishopL(fr,fc,tr,tc){if(Math.abs(fr-tr)!==Math.abs(fc-tc))return false;return!isBlocked(fr,fc,tr,tc);}
        function isKnightL(fr,fc,tr,tc){const rd=Math.abs(fr-tr),cd=Math.abs(fc-tc);return(rd===2&&cd===1)||(rd===1&&cd===2);}
        function isBlocked(fr,fc,tr,tc){const rs=tr>fr?1:tr<fr?-1:0,cs=tc>fc?1:tc<fc?-1:0;let cr=fr+rs,cc=fc+cs;while(cr!==tr||cc!==tc){if(S.board[cr][cc])return true;cr+=rs;cc+=cs;}return false;}
        function aiMove(){setTimeout(()=>{const bp=[];for(let r=0;r<8;r++)for(let c=0;c<8;c++){const p=S.board[r][c];if(p&&p===p.toLowerCase())bp.push([r,c]);}let done=false;for(let i=0;i<100&&!done;i++){const[fr,fc]=bp[Math.floor(Math.random()*bp.length)],tr=Math.floor(Math.random()*8),tc=Math.floor(Math.random()*8);if(isLegal(fr,fc,tr,tc)){makeMove(fr,fc,tr,tc);done=true;}}},1000);}
        function getHint(){const h=document.getElementById('hint-box'),l=L[S.lv-1];let ht="Try moving different pieces!";if(l.type==='movement')ht=`Remember: The ${PN[l.piece]} ${{'R':'moves in straight lines.','B':'moves diagonally.','Q':'moves like a Rook AND a Bishop!','N':'moves in an L-shape and can jump.','K':'moves one square in any direction.','P':'moves forward but captures diagonally.'}[l.piece]}`;else if(l.type==='setup')ht="Row 1: Rook, Knight, Bishop, Queen (on d1), King (on e1), Bishop, Knight, Rook. Row 2: All Pawns. Rows 7-8 mirror for black!";h.innerHTML=`<div class="hint-box"><strong>üí° Hint:</strong> ${ht}</div>`;h.style.display='block';setTimeout(()=>h.style.display='none',8000);}
        function checkComp(){const l=L[S.lv-1];if(l.type==='movement'){let bp=0;for(let r=0;r<8;r++)for(let c=0;c<8;c++)if(S.board[r][c]==='p')bp++;if(bp===0)completeL();}}
        function completeL(){S.comp[S.lv-1]=1;showMsg('üéâ Level Complete! Awesome job!','success');document.getElementById('next-btn').style.display='block';updateProg();}
        function nextLevel(){if(S.lv<L.length){S.lv++;loadLevel(S.lv);}else{showMsg('üèÜ Congratulations! You completed all levels!','success');}}
        function loadLevel(n){const l=L[n-1];S.lv=n;S.hist=[];S.turn='white';S.selP=null;document.getElementById('next-btn').style.display='none';clearHL();if(l.type==='setup'){S.board=Array(8).fill(null).map(()=>Array(8).fill(null));S.setup=true;showPSel();showHelper();document.getElementById('check-setup-btn').style.display='block';document.getElementById('clear-btn').style.display='block';document.getElementById('solution-btn').style.display='block';document.getElementById('undo-btn').style.display='none';}else{S.setup=false;document.getElementById('piece-selector').style.display='none';document.getElementById('setup-helper').style.display='none';document.getElementById('check-setup-btn').style.display='none';document.getElementById('clear-btn').style.display='none';document.getElementById('solution-btn').style.display='none';document.getElementById('undo-btn').style.display='block';S.board=l.setup?l.setup():getInit();}document.getElementById('level-info').innerHTML=`<h3>Level ${l.id}: ${l.name}</h3><p>${l.desc}</p>`;document.getElementById('instruction-box').innerHTML=`<h4>üìñ Instructions</h4><p>${l.inst}</p>`;initBoard();updateProg();}
        function updateProg(){const c=S.comp.filter(x=>x).length,t=L.length,p=Math.round((c/t)*100);const pf=document.getElementById('progress-fill');pf.style.width=p+'%';pf.textContent=p+'%';}
        function updateTurn(){const i=document.getElementById('turn-indicator');i.textContent=S.mode==='learn'?(S.setup?'üéØ Setup Mode':'üìö Learning Mode'):(S.turn==='white'?'White':'Black')+"'s Turn";}
        function showMsg(m,t){const d=document.getElementById('status-message');d.className=`status-message status-${t}`;d.textContent=m;d.style.display='block';setTimeout(()=>d.style.display='none',5000);}
        function setMode(m){S.mode=m;document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));event.target.classList.add('active');if(m==='learn'){loadLevel(1);}else{S.setup=false;document.getElementById('piece-selector').style.display='none';document.getElementById('setup-helper').style.display='none';document.getElementById('check-setup-btn').style.display='none';document.getElementById('clear-btn').style.display='none';document.getElementById('solution-btn').style.display='none';S.board=getInit();S.turn='white';initBoard();document.getElementById('instruction-box').innerHTML=`<h4>üìñ Instructions</h4><p>${m==='practice'?'Play against the AI! Try to checkmate the black king.':'Two player mode! Take turns moving pieces.'}</p>`;}}
        function resetBoard(){S.hist=[];S.turn='white';S.selP=null;if(S.mode==='learn')loadLevel(S.lv);else{S.board=getInit();initBoard();}}
        function showLegend(){const l=document.getElementById('piece-legend');l.innerHTML='<h4 style="grid-column: 1 / -1; margin-bottom: 10px; font-size: 1.1em;">‚ôü Chess Pieces</h4>';[['K','King'],['Q','Queen'],['R','Rook'],['B','Bishop'],['N','Knight'],['P','Pawn']].forEach(([s,n])=>{const i=document.createElement('div');i.className='piece-item';i.innerHTML=`<span>${P[s]}</span><span><strong>${n}</strong></span>`;l.appendChild(i);});}
        window.onload=()=>{loadLevel(1);showLegend();};
    </script>
</body>
</html>
